(function(j,l,a){var e=["webkit","Moz","ms","O"],q={},p;function h(r,u){var s=l.createElement(r||"div"),t;for(t in u){s[t]=u[t]}return s}function i(r,t,s){if(s&&!s.parentNode){i(r,s)}r.insertBefore(t,s||null);return r}var k=(function(){var r=h("style");i(l.getElementsByTagName("head")[0],r);return r.sheet||r.styleSheet})();function c(v,r,w,A){var s=["opacity",r,~~(v*100),w,A].join("-"),t=0.01+w/A*100,y=Math.max(1-(1-v)/r*(100-t),v),x=p.substring(0,p.indexOf("Animation")).toLowerCase(),u=x&&"-"+x+"-"||"";if(!q[s]){k.insertRule("@"+u+"keyframes "+s+"{0%{opacity:"+y+"}"+t+"%{opacity:"+v+"}"+(t+0.01)+"%{opacity:1}"+(t+r)%100+"%{opacity:"+v+"}100%{opacity:"+y+"}}",0);q[s]=1}return s}function o(v,w){var u=v.style,r,t;if(u[w]!==a){return w}w=w.charAt(0).toUpperCase()+w.slice(1);for(t=0;t<e.length;t++){r=e[t]+w;if(u[r]!==a){return r}}}function g(r,t){for(var s in t){r.style[o(r,s)||s]=t[s]}return r}function n(t){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var u in s){if(t[u]===a){t[u]=s[u]}}}return t}function m(r){var s={x:r.offsetLeft,y:r.offsetTop};while((r=r.offsetParent)){s.x+=r.offsetLeft;s.y+=r.offsetTop}return s}var b=function b(r){if(!this.spin){return new b(r)}this.opts=n(r||{},b.defaults,d)},d=b.defaults={lines:12,length:7,width:5,radius:10,color:"#000",speed:1,trail:100,opacity:1/4,fps:20},f=b.prototype={spin:function(y){this.stop();var B=this,s=B.el=g(h(),{position:"relative"}),C,A;if(y){A=m(i(y,s,y.firstChild));C=m(s);g(s,{left:(y.offsetWidth>>1)-C.x+A.x+"px",top:(y.offsetHeight>>1)-C.y+A.y+"px"})}s.setAttribute("aria-role","progressbar");B.lines(s,B.opts);if(!p){var r=B.opts,v=0,t=r.fps,x=t/r.speed,w=(1-r.opacity)/(x*r.trail/100),z=x/r.lines;(function u(){v++;for(var D=r.lines;D;D--){var E=Math.max(1-(v+D*z)%x*w,r.opacity);B.opacity(s,r.lines-D,E,r)}B.timeout=B.el&&setTimeout(u,~~(1000/t))})()}return B},stop:function(){var r=this.el;if(r){clearTimeout(this.timeout);if(r.parentNode){r.parentNode.removeChild(r)}this.el=a}return this}};f.lines=function(t,v){var s=0,r;function u(w,x){return g(h(),{position:"absolute",width:(v.length+v.width)+"px",height:v.width+"px",background:w,boxShadow:x,transformOrigin:"left",transform:"rotate("+~~(360/v.lines*s)+"deg) translate("+v.radius+"px,0)",borderRadius:(v.width>>1)+"px"})}for(;s<v.lines;s++){r=g(h(),{position:"absolute",top:1+~(v.width/2)+"px",transform:"translate3d(0,0,0)",opacity:v.opacity,animation:p&&c(v.opacity,v.trail,s,v.lines)+" "+1/v.speed+"s linear infinite"});if(v.shadow){i(r,g(u("#000","0 0 4px #000"),{top:2+"px"}))}i(t,i(r,u(v.color,"0 0 1px rgba(0,0,0,.1)")))}return t};f.opacity=function(s,r,t){if(r<s.childNodes.length){s.childNodes[r].style.opacity=t}};(function(){var t=g(h("group"),{behavior:"url(#default#VML)"}),r;if(!o(t,"transform")&&t.adj){for(r=4;r--;){k.addRule(["group","roundrect","fill","stroke"][r],"behavior:url(#default#VML)")}f.lines=function(w,v){var u=v.length+v.width,C=2*u;function B(){return g(h("group",{coordsize:C+" "+C,coordorigin:-u+" "+-u}),{width:C,height:C})}var A=B(),x=~(v.length+v.radius+v.width)+"px",z;function y(D,s,E){i(A,i(g(B(),{rotation:360/v.lines*D+"deg",left:~~s}),i(g(h("roundrect",{arcsize:1}),{width:u,height:v.width,left:v.radius,top:-v.width>>1,filter:E}),h("fill",{color:v.color,opacity:v.opacity}),h("stroke",{opacity:0}))))}if(v.shadow){for(z=1;z<=v.lines;z++){y(z,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)")}}for(z=1;z<=v.lines;z++){y(z)}return i(g(w,{margin:x+" 0 0 "+x,zoom:1}),A)};f.opacity=function(u,s,w,v){var x=u.firstChild;v=v.shadow&&v.lines||0;if(x&&s+v<x.childNodes.length){x=x.childNodes[s+v];x=x&&x.firstChild;x=x&&x.firstChild;if(x){x.opacity=w}}}}else{p=o(t,"animation")}})();j.Spinner=b})(window,document);